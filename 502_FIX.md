# 502 Error Fix Guide

## Common Causes of 502 Error

1. **Migrations failing** - Database issues
2. **Static files collection failing** - WhiteNoise configuration
3. **App crashing on startup** - Import errors or settings issues
4. **Database locked** - SQLite file permission issues

## What I Fixed

### 1. Updated Procfile
- Made migrations non-blocking (`|| true`)
- Made collectstatic non-blocking
- Added proper Gunicorn logging
- Added workers and timeout settings

### 2. Fixed ALLOWED_HOSTS
- Added `.railway.app` wildcard support
- Added Railway public domain detection

### 3. Fixed Static Files
- Changed to `CompressedStaticFilesStorage` (more forgiving than Manifest)
- Prevents crashes if static files are missing

## Check Railway Logs

In Railway Dashboard → Deployments → Latest → View Logs

Look for:
- ✅ "Operations to perform: Apply all migrations"
- ✅ "Starting gunicorn"
- ✅ "Booting worker"
- ❌ Any Python tracebacks or errors

## Common Fixes

### If migrations fail:
```bash
# In Railway, you might need to set in Start Command:
python manage.py migrate --run-syncdb --noinput || true
```

### If static files fail:
The Procfile already handles this with `|| true`, but if needed:
```bash
# Disable static files collection in Procfile
python manage.py migrate --noinput || true && gunicorn myProject.wsgi:application --bind 0.0.0.0:$PORT
```

### If database locked (SQLite):
SQLite can have issues on Railway. Consider:
- Using PostgreSQL (Railway provides this)
- Or ensure database file is writable

## Quick Test

After deploying, check Railway logs. You should see:
1. Migrations running (or skipping)
2. Collectstatic running (or skipping)
3. Gunicorn starting
4. Workers booting

If you see errors, share the logs and I can help fix them!

